# üö≤ Velo Graph

> **AI-Powered Bicycle Compatibility Engine** > *RAG-—Å–∏—Å—Ç–µ–º–∞, —è–∫–∞ –¥–æ–ø–æ–º–∞–≥–∞—î –ø–æ—î–¥–Ω—É–≤–∞—Ç–∏ —à–æ—Å–µ–π–Ω—ñ, –≥—Ä–∞–≤—ñ–π–Ω—ñ —Ç–∞ TT –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –Ω–µ –ø–æ—Ä—É—à—É—é—á–∏ –∑–∞–∫–æ–Ω—ñ–≤ —Ñ—ñ–∑–∏–∫–∏ (—Ç–∞ –≥–∞—Ä–∞–Ω—Ç—ñ—ó).*

![Python](https://img.shields.io/badge/Python-3.14+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.128-green.svg)
![Elasticsearch](https://img.shields.io/badge/Elasticsearch-9.x-yellow.svg)
![Architecture](https://img.shields.io/badge/Architecture-RAG-purple.svg)

## üìã –û–≥–ª—è–¥ (Overview)

**Velo Graph** ‚Äî —Ü–µ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –≤–µ–ª–æ—Å–∏–ø–µ–¥–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤. –í–æ–Ω–∞ –≤–∏—Ä—ñ—à—É—î –≥–æ–ª–æ–≤–Ω–∏–π –±—ñ–ª—å –º–µ—Ö–∞–Ω—ñ–∫—ñ–≤ —Ç–∞ —Ç—Ä–∏–∞—Ç–ª–µ—Ç—ñ–≤-–∞–º–∞—Ç–æ—Ä—ñ–≤: *"–ß–∏ –º–æ–∂–Ω–∞ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ —Ü—é –∫–∞—Å–µ—Ç—É –Ω–∞ —Ü–µ–π –ø–µ—Ä–µ–º–∏–∫–∞—á?"* –∞–±–æ *"–ß–∏ –ø—ñ–¥—ñ–π–¥–µ —Ü–µ–π —à–æ—Å–µ–π–Ω–∏–π –≤–∏–Ω–æ—Å –Ω–∞ –º–æ—é –≥—Ä–∞–≤—ñ–π–Ω—É —Ä–∞–º—É?"*.

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö –±–∞–∑ –¥–∞–Ω–∏—Ö, —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **RAG (Retrieval-Augmented Generation)**. –í–æ–Ω–∞ "—á–∏—Ç–∞—î" –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ PDF-–º–∞–Ω—É–∞–ª–∏ (Shimano Dealer Manuals, Technical Specs), —ñ–Ω–¥–µ–∫—Å—É—î —ó—Ö —É –≤–µ–∫—Ç–æ—Ä–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö —ñ –¥–æ–∑–≤–æ–ª—è—î LLM –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è, –ø–æ—Å–∏–ª–∞—é—á–∏—Å—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.

### üéØ –û—Å–Ω–æ–≤–Ω–∏–π Use Case
–ê—Ç–ª–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç—É—î –≥—Ä–∞–≤—ñ–π–Ω–∏–π –≤–µ–ª–æ—Å–∏–ø–µ–¥ (**Kross Esker 8.0**) —É –≥–æ–Ω–æ—á–Ω–∏–π –±–æ–ª—ñ–¥ –¥–ª—è **IRONMAN 70.3**.
–ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —Å—É–º—ñ—Å–Ω–∏–π –≥—Ä–∞–≤—ñ–π–Ω–∏–π –ø–µ—Ä–µ–º–∏–∫–∞—á **Shimano GRX RX810** —ñ–∑ —à–æ—Å–µ–π–Ω–æ—é –∫–∞—Å–µ—Ç–æ—é **11-28T**, –ø–æ–ø—Ä–∏ —Ç–µ, —â–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤–∏–º–∞–≥–∞—î –º—ñ–Ω—ñ–º—É–º 30T.

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ (Tech Stack)

–ü—Ä–æ—î–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ —Å—É—á–∞—Å–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Backend-—Ä–æ–∑—Ä–æ–±–∫–∏ –∑ —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–π –ø–æ—à—É–∫.

* **Core:** Python 3.14, **FastAPI** (Async).
* **Search Engine & Vector DB:** **Elasticsearch**.
    * –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **Hybrid Search**: `Keyword Search` (–¥–ª—è —Ç–æ—á–Ω–∏—Ö –Ω–∞–∑–≤ –º–æ–¥–µ–ª–µ–π, –Ω–∞–ø—Ä. "RD-R8000") + `kNN Vector Search` (–¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ).
* **AI / LLM:** OpenAI API (GPT-4o) —á–µ—Ä–µ–∑ **LangChain**.
* **ETL / Ingestion:**
    * `Unstructured` / `PyMuPDF` –¥–ª—è –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—ó —Ç–µ–∫—Å—Ç—É —Ç–∞ —Ç–∞–±–ª–∏—Ü—å –∑ PDF.
    * –°–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –Ω–∞—Ä—ñ–∑–∫–∏ (chunking) —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.
* **Infrastructure:** Docker & Docker Compose.

### –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö (Data Flow)

```mermaid
graph LR
    A[PDF Manuals] -->|OCR & Chunking| B(Ingestion Pipeline)
    B -->|Embeddings| C[(Elasticsearch)]
    D[User Query] -->|API Request| E[FastAPI]
    E -->|Hybrid Search| C
    C -->|Context + Specs| E
    E -->|Context + Prompt| F[LLM Reasoning]
    F -->|Analysis & Verdict| D
```

---

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

1.  **Semantic Tech Search:** –†–æ–∑—É–º—ñ—î –∑–∞–ø–∏—Ç–∏ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–Ω—ñ–π –º–æ–≤—ñ (Natural Language), –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: *"Is GRX compatible with road shifters?"*.
2.  **Logic & Constraint Checking:** –ê–Ω–∞–ª—ñ–∑—É—î —á–∏—Å–ª–æ–≤—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è (Capacity, Max/Min Sprocket, Chainline), –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.
3.  **Source Citation:** –ö–æ–∂–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –º—ñ—Å—Ç–∏—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ ("Dealer Manual page 14"), —â–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–≥ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.
4.  **"Franken-mode":** –ê–Ω–∞–ª—ñ–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π (mullet drivetrains), —è–∫—ñ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è, –∞–ª–µ —Ñ—ñ–∑–∏—á–Ω–æ –º–æ–∂–ª–∏–≤—ñ.

---

## üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –í–∏–º–æ–≥–∏
* Docker & Docker Compose
* Python 3.14+
* Poetry (–∞–±–æ pip)
* OpenAI API Key (–∞–±–æ —Å—É–º—ñ—Å–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å)

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone [https://github.com/ohiliazov/velograph.git](https://github.com/ohiliazov/velograph.git)
cd velograph
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥—É:
```bash
OPENAI_API_KEY=sk-your-key-here
ELASTICSEARCH_URL=http://localhost:9200
ELASTIC_PASSWORD=changeme
```

### 3. –ó–∞–ø—É—Å–∫ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (Elasticsearch + Kibana)
```bash
docker-compose up -d
```

### 4. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –∑–∞–ø—É—Å–∫ API
```bash
poetry install
poetry run uvicorn app.main:app --reload
```
API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:8000/docs`

### 5. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–∞–∑–∏ –∑–Ω–∞–Ω—å
–©–æ–± —Å–∏—Å—Ç–µ–º–∞ "–ø–æ—É–º–Ω—ñ—à–∞–ª–∞", –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–∞–Ω—É–∞–ª–∏:
```bash
python scripts/ingest.py --source "./manuals/shimano_grx.pdf"
```

---

## üìö –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (API)

**Endpoint:** `POST /api/v1/compatibility/check`

**Request:**
```json
{
  "component_a": "Shimano GRX RD-RX810",
  "component_b": "Cassette 11-28T (Ultegra R8000)",
  "context": "Triathlon setup on a gravel bike frame"
}
```

**Response:**
```json
{
  "status": "Conditional Warning",
  "compatibility_score": 0.85,
  "analysis": "–û—Ñ—ñ—Ü—ñ–π–Ω–æ Shimano –≤–∫–∞–∑—É—î, —â–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∑—ñ—Ä–∫–∞ (Low Sprocket Min) –¥–ª—è GRX RD-RX810 —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 30T. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞—Å–µ—Ç–∏ 11-28T –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –º–µ–∂—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.",
  "expert_note": "–¢–µ—Ö–Ω—ñ—á–Ω–æ —Ü–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ, —è–∫—â–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∑–∞–∫—Ä—É—Ç–∏—Ç–∏ –≥–≤–∏–Ω—Ç B-tension (B-screw), —â–æ–± –Ω–∞–±–ª–∏–∑–∏—Ç–∏ —Ä–æ–ª–∏–∫ –¥–æ –∫–∞—Å–µ—Ç–∏. –ü—Ä–æ—Ç–µ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –Ω–∞ –º–∞–ª–∏—Ö –∑—ñ—Ä–∫–∞—Ö –º–æ–∂–µ –±—É—Ç–∏ –º–µ–Ω—à —á—ñ—Ç–∫–∏–º.",
  "sources": [
    {
      "doc": "DM-RX810-001.pdf",
      "page": 14,
      "text": "Total capacity: 40T, Low sprocket_min: 30T..."
    }
  ]
}
```

---

## üîÆ Roadmap

* [ ] **Vision API for Tables:** –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è GPT-4o-Vision –¥–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –º–∞—Ç—Ä–∏—Ü—å —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ ("Compatibility Charts").
* [ ] **Geometry Calculator:** –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ Stack/Reach –ø—Ä–∏ –∑–º—ñ–Ω—ñ –≤–∏–Ω–æ—Å—ñ–≤ —Ç–∞ –∫–µ—Ä–º–∞.
* [ ] **Marketplace Integration:** –ü–æ—à—É–∫ —Å—É–º—ñ—Å–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –Ω–∞ eBay/OLX –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ.

---

## üìÑ License
MIT
